import{A as n}from"./AppLayout.dbd769dd.js";import{B as a}from"./BreadCrumbs.14245490.js";import{n as l}from"./_plugin-vue2_normalizer.358ffe07.js";import"./Footer.e9279ddd.js";import"./app.1e841923.js";import"./logo-ceindetec.0997e866.js";import"./Logo.5a18e3f9.js";import"./SettingsDropdown.da80baee.js";const c={components:{AppLayout:n,BreadCrumbs:a},props:["data","errors"],data(){return{isEditMode:!1,isOpen:!1,search:"",form:this.$inertia.form({name:null,line:null,description:null}),headers:[{text:"Id",align:"start",sortable:!1,value:"id"},{text:"Nombre",value:"name"},{text:"Linea",value:"line"},{text:"Descripci\xF3n",value:"description"},{text:"Acciones",value:"actions",sortable:!1}],editedIndex:-1,editedItem:{name:""},defaultItem:{name:""},lines:[{name:"Conectividad",icon:"mdi-radio-tower"},{name:"Paneles Solares",icon:"mdi-solar-power-variant "},{name:"Hidropaneles",icon:"mdi-solar-panel"}],items:[{text:"Dashboard",disabled:!1,href:"/dashboard"},{text:"Categor\xEDa de tickets",disabled:!0,href:"breadcrumbs_link_1"}]}},computed:{nameRules(){return[s=>!!s||"El nombre es requerido",s=>s&&s.length<=50||"El nombre no puede tener m\xE1s de 50 caracteres"]},lineRules(){return[s=>!!s||"La linea es requerida"]},descriptionRules(){return[s=>!!s||"La descripci\xF3n es requerida"]},title(){return this.isEditMode?"Editar categor\xEDa de ticket":"Crear nueva categor\xEDa de ticket"},icon(){return this.isEditMode?"mdi-table-edit":"mdi-table-plus"},buttonLabel(){return this.isEditMode?"Guardar cambios":"Crear registro"}},methods:{valid:async function(){return await this.$refs.form.validate(s=>!!s)},openModal:function(){this.isOpen=!0},closeModal:function(){this.isOpen=!1,this.reset(),this.isEditMode=!1},reset:function(){this.$refs.form.resetValidation(),this.$refs.form.reset(),this.form=this.$inertia.form({name:null,description:null})},save:async function(s){console.log(await this.valid()),await this.valid()&&this.form.post(route("ticket-category.store",s),{onSuccess:e=>{console.log(e),this.$swal("Buen trabajo!",e.props.flash.message,"success"),this.reset(),this.closeModal(),this.isEditMode=!1},onError:e=>{console.log("Error al enviar el formulario."),console.log(e);let t=Object.values(e).join("<br>");this.$swal({icon:"error",title:"Ups...",html:t})}})},edit:function(s){this.form=this.$inertia.form(s),this.isEditMode=!0,this.openModal()},update:function(s){console.log(s.id),s._method="PUT",this.$inertia.post(route("ticket-category.update",s.id),s,{onSuccess:e=>{this.$swal("Buen trabajo!",e.props.flash.message,"success"),this.reset(),this.closeModal()},onError:e=>{this.form=this.form.setError(e);let t=Object.values(e).join("<br>");this.$swal({icon:"error",title:"Ups...",html:t})}})},deleteRow:function(s){s._method="DELETE",this.$swal({title:"\xBFEst\xE1 seguro? ",text:"al eliminar este elemento No podr\xE1s revertir esta acci\xF3n.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xED, Eliminarlo!"}).then(e=>{e.isConfirmed&&this.$inertia.post(this.route("ticket-category.destroy",s.id),s,{onStart:t=>{this.loadingDeleteItem=!0},onSuccess:t=>{console.log("estamos eliminando la info",t),this.$swal({icon:`${t.props.errors.message?"error":"success"}`,title:`${t.props.errors.message?"Ups...":"\xA1Buen trabajo!"}`,text:`${t.props.errors.message?t.props.errors.message:t.props.flash.message}`})},onError:t=>{this.$swal("\xA1Ops...!","Disculpe, ocurri\xF3 un error.","warning")},onFinish:t=>{this.loadingDeleteItem=!1}})})},initialize:function(){this.$inertia.get(this.route("ticket-category.index"))},findLineByName:function(s){return this.lines.find(e=>e.name===s)}}};var d=function(){var e=this,t=e._self._c;return t("app-layout",[t("bread-crumbs",{attrs:{items:e.items,name:"Categor\xEDa de tickets"}}),t("v-container",{staticClass:"py-12"},[t("v-row",{staticClass:"ma-0"},[t("v-col",[t("v-card",{staticStyle:{width:"100%"}},[t("v-card-text",{},[t("v-row",{staticClass:"no-gutters"},[t("div",{staticClass:"d-flex justify-space-between justify-md-start col-md-6 col-12"},[t("v-btn",{staticClass:"mr-3 success",on:{click:function(r){e.isOpen=!e.isOpen}}},[t("v-icon",{staticClass:"notranslate mr-2"},[e._v(" mdi-plus ")]),e._v(" Crear ")],1)],1),t("v-spacer"),t("div",{staticClass:"mx-auto mt-4 mt-md-0",staticStyle:{"max-width":"250px"}},[t("v-text-field",{attrs:{"append-icon":"mdi-magnify",dense:"",enclosed:"","hide-details":"",outlined:"",placeholder:"Consultar"},model:{value:e.search,callback:function(r){e.search=r},expression:"search"}})],1)],1)],1)],1)],1)],1),t("v-row",{staticClass:"ma-0"},[t("v-col",[t("v-card",{staticStyle:{width:"100%"}},[t("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.data,search:e.search,"sort-by":"calories"},scopedSlots:e._u([{key:"item.line",fn:function({item:r}){var i,o;return[t("v-icon",{staticClass:"mr-1"},[e._v(" "+e._s((i=e.findLineByName(r.line))==null?void 0:i.icon)+" ")]),t("span",{domProps:{innerHTML:e._s((o=e.findLineByName(r.line))==null?void 0:o.name)}})]}},{key:"item.actions",fn:function({item:r}){return[t("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(i){return e.edit(r)}}},[e._v(" mdi-pencil-outline ")]),t("v-icon",{attrs:{small:""},on:{click:function(i){return e.deleteRow(r)}}},[e._v(" mdi-delete-outline ")])]}},{key:"no-data",fn:function(){return[t("v-btn",{attrs:{color:"primary"},on:{click:e.initialize}},[e._v(" Recargar ")])]},proxy:!0}])})],1)],1)],1)],1),t("v-dialog",{attrs:{"max-width":"800",persistent:""},model:{value:e.isOpen,callback:function(r){e.isOpen=r},expression:"isOpen"}},[t("v-card",{staticClass:"pa-6"},[t("v-card-title",{staticClass:"text-h5"},[t("v-icon",{attrs:{left:!0}},[e._v(e._s(e.icon))]),e._v(" "+e._s(e.title)+" ")],1),t("v-divider"),t("v-card-text",{staticClass:"mt-3"},[t("v-form",{ref:"form",on:{submit:function(r){return r.preventDefault(),e.route("ticket-category.store")}}},[t("v-text-field",{attrs:{counter:50,"error-messages":e.form.errors.name,rules:e.nameRules,label:"Nombre",outlined:"",required:""},on:{blur:function(r){return e.form.clearErrors("name")}},model:{value:e.form.name,callback:function(r){e.$set(e.form,"name",r)},expression:"form.name"}}),t("v-autocomplete",{attrs:{"error-messages":e.form.errors.line,items:e.lines,rules:e.lineRules,"item-text":"name","item-value":"name",label:"Linea a la cual pertenece la categor\xEDa ",outlined:""},on:{blur:function(r){return e.form.clearErrors("line")}},scopedSlots:e._u([{key:"item",fn:function(r){return[typeof r.item!="object"?[t("v-list-item-content",{domProps:{textContent:e._s(r.item)}})]:[t("v-list-item-avatar",[t("v-icon",[e._v(" "+e._s(r.item.icon)+" ")])],1),t("v-list-item-title",{domProps:{innerHTML:e._s(r.item.name)}})]]}}]),model:{value:e.form.line,callback:function(r){e.$set(e.form,"line",typeof r=="string"?r.trim():r)},expression:"form.line"}}),t("v-textarea",{attrs:{"error-messages":e.form.errors.description,rules:e.descriptionRules,label:"Descripci\xF3n",outlined:"",required:""},on:{blur:function(r){return e.form.clearErrors("description")}},model:{value:e.form.description,callback:function(r){e.$set(e.form,"description",r)},expression:"form.description"}}),t("div",{staticClass:"d-flex justify-end"},[t("v-btn",{directives:[{name:"show",rawName:"v-show",value:!e.isEditMode,expression:"!isEditMode"}],staticClass:"primary mx-1",attrs:{disabled:e.form.processing,dark:"",type:"button","wire:click.prevent":"store()"},on:{click:function(r){return e.save(e.form)}}},[e._v(" Guardar ")]),t("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.isEditMode,expression:"isEditMode"}],staticClass:"primary x-1",attrs:{dark:"",type:"button","wire:click.prevent":"store()"},on:{click:function(r){return e.update(e.form)}}},[e._v(" Actualizar ")]),t("v-btn",{staticClass:"secondary mx-1",attrs:{dark:"",type:"button"},on:{click:function(r){return e.closeModal()}}},[e._v(" Cancelar ")])],1),e.form.progress?t("progress",{attrs:{max:"100"},domProps:{value:e.form.progress.percentage}},[e._v(" "+e._s(e.form.progress.percentage)+"% ")]):e._e()],1)],1)],1)],1)],1)},m=[],u=l(c,d,m,!1,null,null,null,null);const y=u.exports;export{y as default};
