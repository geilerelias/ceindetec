import{A as r}from"./AppLayout.7e6a42a7.js";import{B as n}from"./BreadCrumbs.14245490.js";import{c as i}from"./colombia.89799eca.js";import{P as l}from"./PictureInput.1e25d6a4.js";import{S as o}from"./SpinnerComponent.6d0b39d4.js";import{n as m}from"./_plugin-vue2_normalizer.358ffe07.js";import"./Footer.69c5493d.js";import"./app.77aa44cf.js";import"./logo-ceindetec.0997e866.js";import"./Logo.5a18e3f9.js";import"./SettingsDropdown.da80baee.js";const c={name:"Edit",components:{AppLayout:r,BreadCrumbs:n,PictureInput:l,SpinnerComponent:o},props:["data","errors"],data:()=>({items:[{text:"Dashboard",disabled:!1,href:"/dashboard"},{text:"Establecimientos",disabled:!1,href:"/dashboard/establishment"},{text:"Edici\xF3n",disabled:!0,href:"#"}],saving:!1,valid:!1,departments:[],establishment:{name:"",nit:"",municipality:null,department:null},defaultEstablishment:{name:"",nit:"",municipality:null,department:null},rules:{required:e=>!!e||"Campo requerido.",max:e=>e.length<=12||"M\xE1ximo 12 caracteres",min:e=>e.length>=12||"M\xEDnimo 12 caracteres",email:e=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)||"Invalid e-mail.",phone:e=>/[7-9]{1}[0-9]{9}/.test(e)||"Numero telef\xF3nico invalido.",text:e=>/^\s+$/.test(e)||"Solo caracteres alfab\xE9ticos.",number:e=>/^\d+$/.test(e)||"solo caracteres num\xE9ricos."}}),created(){for(const e in i)this.departments.push(i[e].departamento);this.departments=this.departments.sort(),this.establishment=this.data},methods:{validate(){this.$refs.form.validate()},reset(){this.$refs.form.reset()},resetValidation(){this.$refs.form.resetValidation()},update(){this.saving=!0,this.establishment._method="PUT",this.$inertia.post(this.route("establishment.update",this.establishment.id),this.establishment,{onStart:e=>{this.loadingEditItem=!0},onSuccess:e=>{this.$swal({icon:`${e.props.errors.name?"error":"success"}`,title:`${e.props.errors.name?"Ups...":"\xA1Buen trabajo!"}`,text:`${e.props.errors.name?e.props.errors.name[0]:e.props.flash.message}`}).then(t=>{this.saving=!1,t.isConfirmed&&(this.establishment=this.defaultEstablishment,this.reset(),this.resetValidation(),this.$inertia.get(this.route("establishment.index")))})},onError:e=>{this.$swal("Opps...!","Excuse me, an error occurred.","warning")},onFinish:e=>{this.loadingEditItem=!1,this.saving=!1}})},getCities(e){try{return i.filter(function(t){return t.departamento==e})[0].ciudades}catch{return[]}}}};var d=function(){var t=this,s=t._self._c;return s("app-layout",[s("bread-crumbs",{attrs:{name:"Actualizaci\xF3n de establecimiento",items:t.items}}),s("v-container",{staticClass:"d-flex justify-center"},[s("div",{staticClass:"py-6",staticStyle:{"max-width":"800px"}},[s("v-card",{staticClass:"mt-4 v-card"},[s("v-card-title",{staticClass:"align-start"},[s("v-card",{staticClass:"overflow-hidden mt-n9 transition-swing elevation-6 rounded primary",staticStyle:{"max-width":"100%"}},[s("div",{staticClass:"pa-8"},[s("v-icon",{attrs:{dark:"",size:"36"}},[t._v("mdi-school")])],1)]),s("div",{staticClass:"text-h5 pl-4"},[t._v(" Modifica la informaci\xF3n del establecimiento ")])],1),s("v-form",{ref:"form",model:{value:t.valid,callback:function(a){t.valid=a},expression:"valid"}},[s("v-container",{staticClass:"py-0 px-4"},[s("v-row",{staticClass:"row"},[s("v-col",{staticClass:"col-12"},[s("v-text-field",{attrs:{label:"Nombre del establecimiento",rules:[t.rules.required,t.rules.min]},model:{value:t.establishment.name,callback:function(a){t.$set(t.establishment,"name",a)},expression:"establishment.name"}})],1),s("v-col",{staticClass:"col-md-4 col-12"},[s("v-text-field",{attrs:{label:"Nit",type:"number"},model:{value:t.establishment.nit,callback:function(a){t.$set(t.establishment,"nit",a)},expression:"establishment.nit"}})],1),s("v-col",{staticClass:"col-md-3 col-12"},[s("v-select",{attrs:{items:t.departments,rules:[t.rules.required],label:"Departamento *",required:""},model:{value:t.establishment.department,callback:function(a){t.$set(t.establishment,"department",a)},expression:"establishment.department"}})],1),s("v-col",{staticClass:"col-md-3 col-12"},[s("v-select",{attrs:{disabled:t.establishment.department==null,items:t.getCities(t.establishment.department),rules:[t.rules.required],label:"Municipio *",required:""},model:{value:t.establishment.municipality,callback:function(a){t.$set(t.establishment,"municipality",a)},expression:"establishment.municipality"}})],1),s("v-col",{staticClass:"text-right col-12 pb-6"},[s("v-btn",{attrs:{color:"secondary"},on:{click:function(a){return t.reset()}}},[t._v(" limpiar formulario ")]),s("v-btn",{attrs:{color:"primary",disabled:!t.valid,loading:t.saving},on:{click:t.update}},[t._v(" Actualizar Informaci\xF3n ")])],1)],1)],1)],1)],1)],1)]),s("spinner-component",{attrs:{value:t.saving,color:"primary",opacity:.9}})],1)},p=[],u=m(c,d,p,!1,null,null,null,null);const w=u.exports;export{w as default};
