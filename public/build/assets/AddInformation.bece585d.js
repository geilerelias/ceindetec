import{S as l}from"./SimpleLayout.903ef5f3.js";import r from"./CreateEdit.16f11df5.js";import{n as o}from"./_plugin-vue2_normalizer.358ffe07.js";import"./Logo.5a18e3f9.js";import"./logo-ceindetec.0997e866.js";import"./SettingsDropdown.da80baee.js";import"./vue2-editor.esm.02e33a23.js";import"./app.8bbe0a1c.js";import"./SpinnerComponent.6d0b39d4.js";import"./PictureInput.1e25d6a4.js";import"./colombia.89799eca.js";const n={name:"AddInformation",components:{simpleLayout:l,createPerson:r},data:()=>({links:["Dashboard","Messages","Profile","Updates"],editMode:!1,isOpen:!1,form:null,establishments_id:null,headquarters_id:null,establishments:[],headquarters:[],people:[],rules:{required:a=>!!a||"Campo requerido.",max:a=>a.length<=20||"M\xE1ximo 20 caracteres",min:a=>a.length>=10||"M\xEDnimo 10 caracteres",email:a=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(a)||"Direcci\xF3n de correo invalida.",phone:a=>/^\(?(\d{3})\)?[- ]?(\d{3})[- ]?(\d{4})$/.test(a)||"Numero telef\xF3nico invalido.",text:(a,e)=>/[a-zA-Z ]{2,254}/.test(a)||`Entrada incorrecta para el campo ${e}.`,number:a=>/^\d+$/.test(a)||"Solo caracteres num\xE9ricos."}}),created(){axios.get("/dashboard/establishment/all").then(a=>{console.log(a.data),this.establishments=a.data})},methods:{getYearsOld(a){let e=new Date,t=new Date(a),i=e.getFullYear()-t.getFullYear(),s=e.getMonth()-t.getMonth();return(s<0||s===0&&e.getDate()<t.getDate())&&i--,i},openModal:function(){this.isOpen=!0},closeModal:function(){this.isOpen=!1,this.editMode=!1},create:function(){this.editMode=!1,this.openModal()},getHeadquarters(){let a=this.establishments_id;a!==null&&axios.get(`/dashboard/establishment/${a}/headquarters`).then(e=>{this.headquarters=e.data}).catch(e=>{console.log(e)})},getPeople(){axios.get(`/dashboard/person/${this.headquarters_id}/all`).then(a=>{console.log(a.data),this.people=a.data}).catch(a=>{console.log(a)})}}};var d=function(){var e=this,t=e._self._c;return t("simple-layout",{attrs:{extension:!1},scopedSlots:e._u([{key:"header",fn:function(){return[t("p",{staticClass:"fill-height text-sm-h5 text-body-2 white--text font-weight-bold text-uppercase text-right d-flex align-center mr-2 pt-5"},[e._v(" Registro de informaci\xF3n personal ")])]},proxy:!0}])},[t("v-main",{staticClass:"grey lighten-3 fill-height"},[t("v-container",[t("h1",{staticClass:"text-h4 font-weight-bold mb-0 text-left"},[e._v("Registrar datos ")]),t("div",{staticClass:"primary--text text-subtitle-1 font-weight-bold mb-4 text-left"},[e._v(" Ingresar informaci\xF3n de los miembros de la comunidad educativa ")]),t("div",{staticClass:"base-body text-body-1 grey--text text--darken-1 text-left"},[e._v(" A continuaci\xF3n, encontrar\xE1 un formulario en el cual deber\xE1s seleccionar la informaci\xF3n pertinente al establecimiento educativo y la sede de la cual eres miembro. ")]),t("div",{staticClass:"base-body text-body-1 grey--text text--darken-1 text-left"},[e._v(" Se les solicita encarecidamente ingresar por sede la informaci\xF3n de miembros de la comunidad educativa. "),t("br"),e._v(" Los miembros a registrar son los siguiente: ")]),t("ul",{staticStyle:{"list-style-type":"disc !important"}},[t("li",{staticClass:"font-weight-bold text--primary"},[e._v(" Rector o Director ")]),t("li",{staticClass:"font-weight-bold text--primary"},[e._v(" Coordinador ")]),t("li",{staticClass:"font-weight-bold text--primary"},[e._v(" M\xEDnimo dos (2) Docentes ")]),t("li",{staticClass:"font-weight-bold text--primary"},[e._v(" M\xEDnimo tres (3) Estudiantes con sus acudientes ")])]),t("p",[e._v(" No olvidar especificar el rol del mismo dentro del establecimiento. ")]),t("v-row",[t("v-col",{staticClass:"mx-auto",attrs:{cols:"12",md:"4"}},[t("v-card",{attrs:{rounded:"lg"}},[t("v-card-subtitle",[e._v(" Selecciona el establecimiento educativo y la sede a la que pertenece e ingresa la informaci\xF3n ")]),t("v-card-text",[t("v-col",{staticClass:"col-12"},[t("v-autocomplete",{attrs:{items:e.establishments,"item-text":"name","item-value":"id",label:"Establecimiento al que pertenece",rules:[e.rules.required],outlined:""},on:{change:e.getHeadquarters},model:{value:e.establishments_id,callback:function(i){e.establishments_id=i},expression:"establishments_id"}})],1),t("v-col",{staticClass:"col-12"},[t("v-autocomplete",{attrs:{disabled:e.establishments_id===null,items:e.headquarters,"item-text":"name","item-value":"id",label:"Sede a la que pertenece",rules:[e.rules.required],outlined:""},on:{change:e.getPeople},model:{value:e.headquarters_id,callback:function(i){e.headquarters_id=i},expression:"headquarters_id"}})],1)],1),t("v-card-actions",[t("v-btn",{staticClass:"success",attrs:{disabled:e.headquarters_id===null,block:""},on:{click:function(i){return e.create()}}},[t("v-icon",{staticClass:"notranslate mr-2"},[e._v(" mdi-plus ")]),e._v(" Crear miembro ")],1)],1)],1)],1),e.people.length>0?t("v-col",{attrs:{transition:"slide-x-reverse-transition"}},[t("v-card",{attrs:{"min-height":"70vh",rounded:"lg"}},[t("v-card-text",[t("v-list",{attrs:{"three-line":""}},[e._l(e.people,function(i,s){return[t("v-list-item",{key:i.id},[t("v-list-item-avatar",[t("img",{staticClass:"rounded-circle",attrs:{cover:"",src:i.profile_photo_path===""||i.profile_photo_path===null?`https://ui-avatars.com/api/?name=${i.name+i.surname}&color=7F9CF5&background=EBF4FF`:"/storage/"+i.profile_photo_path}})]),t("v-list-item-content",[t("v-list-item-title",{staticClass:"d-flex"},[e._v(" "+e._s(i.name)+" "+e._s(i.surname)+" "),t("v-spacer"),e._v(" "+e._s(i.identification_type)+" "+e._s(i.identification_number)+" ")],1),t("v-list-item-subtitle",[e._v(" "+e._s(i.email)+" ")]),t("v-list-item-subtitle",[e._v(" "+e._s(e.getYearsOld(i.birthday_date))+" a\xF1os ")]),t("v-list-item-subtitle",[e._v(" "+e._s(i.direction)+" "+e._s(i.municipality)+" "+e._s(i.department)+" ")]),t("v-list-item-content",[t("div",{staticClass:"font-weight-bold"},[e._v(e._s(i.person_type))])])],1)],1),t("v-divider",{attrs:{inset:""}})]})],2)],1)],1)],1):e._e()],1)],1),e.isOpen?t("create-person",{attrs:{close:e.closeModal,open:e.isOpen,edit:e.editMode,value:e.form,headquarter_id:e.headquarters_id,establishment_id:e.establishments_id}}):e._e()],1)],1)},c=[],m=o(n,d,c,!1,null,"6fc8e8a4",null,null);const q=m.exports;export{q as default};
