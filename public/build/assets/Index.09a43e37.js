import{A as r}from"./AppLayout.7e6a42a7.js";import{B as n}from"./BreadCrumbs.14245490.js";import{n as o}from"./_plugin-vue2_normalizer.358ffe07.js";import"./Footer.69c5493d.js";import"./app.77aa44cf.js";import"./logo-ceindetec.0997e866.js";import"./Logo.5a18e3f9.js";import"./SettingsDropdown.da80baee.js";const l={name:"Index",components:{AppLayout:r,BreadCrumbs:n},props:["data","errors"],data:()=>({items:[{text:"Dashboard",disabled:!1,href:"/"},{text:"Sedes de Establecimientos",disabled:!0,href:""}],headerTooltips:{name:"Name tooltip",calories:"Calories tooltip",fat:"Fat tooltip"},loadingNewItem:!1,loadingEditItem:!1,loadingDeleteItem:!1,selectedEstablishment:[],establishments:[],selectedPermission:[],permission:[],editMode:!1,isOpen:!1,search:"",searchPermission:"",form:{id:null,name:null},dialog:!1,dialogDelete:!1,headers:[{text:"Id",align:"start",sortable:!1,value:"id"},{text:"Nombre",value:"name"},{text:"Establecimiento",value:"establishments_id"},{text:"Municipio",value:"municipality"},{text:"Departamento",value:"department"},{text:"Actions",value:"actions",sortable:!1}],loading:!1,editedIndex:-1,editedItem:{name:""},defaultItem:{name:""}}),created(){axios.get("/dashboard/establishment/all").then(s=>{console.log(s.data),this.establishments=s.data})},methods:{getEstablishment(s){try{return this.establishments.find(e=>e.id===s).name}catch{return null}},editItem(s){this.$inertia.get(this.route("headquarters.edit",s.id))},showItem(s){this.$inertia.get(this.route("headquarters.show",s.id))},deleteItem(s){s._method="DELETE",this.$swal({title:"\xBFEst\xE1 seguro de que desea eliminar este elemento?",text:"\xA1No podr\xE1s revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xED, Eliminarlo!"}).then(t=>{t.isConfirmed&&this.$inertia.post(this.route("headquarters.destroy",s.id),s,{onStart:e=>{this.loadingDeleteItem=!0},onSuccess:e=>{console.log("estamos eliminando la info",e),this.$swal({icon:`${e.props.errors.message?"error":"success"}`,title:`${e.props.errors.message?"Ups...":"\xA1Buen trabajo!"}`,text:`${e.props.errors.message?e.props.errors.message:e.props.flash.message}`})},onError:e=>{this.$swal("\xA1Ay...!","Disculpe, ocurri\xF3 un error.","warning")},onFinish:e=>{this.loadingDeleteItem=!1}})})},initialize(){this.$inertia.get(this.route("headquarters.index"))}}};var d=function(){var t=this,e=t._self._c;return e("app-layout",[e("bread-crumbs",{attrs:{name:"Sedes de Establecimientos",items:t.items}}),e("v-container",[e("v-row",{staticClass:"ma-0"},[e("v-col",[e("v-card",{staticStyle:{width:"100%"}},[e("v-card-text",{},[e("v-row",{staticClass:"no-gutters"},[e("div",{staticClass:"d-flex justify-space-between justify-md-start col-md-6 col-12"},[e("inertia-link",{attrs:{href:t.route("headquarters.create")}},[e("v-btn",{staticClass:"mr-3 success"},[e("v-icon",{staticClass:"notranslate mr-2"},[t._v(" mdi-plus ")]),t._v(" Add ")],1)],1),e("v-btn",{staticClass:"button-shadow primary--text",attrs:{outlined:""}},[e("v-icon",{staticClass:"notranslate mr-2",attrs:{"aria-hidden":"true"}},[t._v(" mdi-filter-variant ")]),t._v(" Filters ")],1)],1),e("v-spacer"),e("div",{staticClass:"mx-auto mt-4 mt-md-0",staticStyle:{"max-width":"250px"}},[e("v-text-field",{attrs:{"hide-details":"",dense:"",enclosed:"",outlined:"","append-icon":"mdi-magnify",placeholder:"search"},model:{value:t.search,callback:function(a){t.search=a},expression:"search"}})],1)],1)],1)],1)],1)],1),e("v-row",{staticClass:"ma-0"},[e("v-col",[e("v-card",{staticStyle:{width:"100%"}},[e("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.data,"sort-by":"calories",search:t.search},scopedSlots:t._u([{key:"item.establishments_id",fn:function({item:a}){return[e("span",[t._v(" "+t._s(t.getEstablishment(a.establishment_id))+" ")])]}},{key:"item.actions",fn:function({item:a}){return[e("div",{staticClass:"d-flex"},[e("v-icon",{staticClass:"mr-2",attrs:{size:"24",color:"secondary"},on:{click:function(i){return t.showItem(a)}}},[t._v(" mdi-information-outline ")]),e("v-icon",{staticClass:"mr-2",attrs:{size:"24",color:"secondary"},on:{click:function(i){return t.editItem(a)}}},[t._v(" mdi-pencil-outline ")]),e("v-icon",{attrs:{size:"24",color:"secondary"},on:{click:function(i){return t.deleteItem(a)}}},[t._v(" mdi-delete-outline ")])],1)]}},{key:"no-data",fn:function(){return[e("v-btn",{attrs:{color:"primary"},on:{click:t.initialize}},[t._v(" Reset ")])]},proxy:!0}]),model:{value:t.selectedEstablishment,callback:function(a){t.selectedEstablishment=a},expression:"selectedEstablishment"}})],1)],1)],1)],1)],1)},c=[],m=o(l,d,c,!1,null,"26c9d643",null,null);const y=m.exports;export{y as default};
