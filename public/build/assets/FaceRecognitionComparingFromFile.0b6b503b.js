import{l as p,a as f,b as u,c as g,n as o,d as c,L as w,F as v,e as h,T as F,m as _,r as y,f as b,g as x,h as k}from"./resizeResults.444d9345.js";import{b as D}from"./bufferToImage.93eb654c.js";import{f as L}from"./fetchImage.70bf5102.js";import{n as C}from"./_plugin-vue2_normalizer.358ffe07.js";const R={data(){return{labels:[],email:"",password:"",faceToken:"",imagePreview:""}},async mounted(){let a="/models/";await p(a),await f(a),await u(a),await g(a),await o.tinyFaceDetector.loadFromUri(a),await o.faceLandmark68Net.loadFromUri(a),await o.faceRecognitionNet.loadFromUri(a)},methods:{async upload(a){const e=a;this.previewImage(e);const t=await D(e),s=await c(t).withFaceLandmarks().withFaceDescriptor();s?(this.faceToken=s.descriptor.join(","),console.log("Face detected")):(this.faceToken="",console.log("Face not detected"))},clearCanvas(){try{const a=document.getElementById("mi-canvas"),e=a.getContext("2d");e.fillRect(0,0,a.width,a.height),e.clearRect(0,0,a.width,a.height)}catch{}},previewImage(a){const e=new FileReader;e.onload=()=>{this.imagePreview=e.result,this.clearCanvas()},e.readAsDataURL(a)},async detectFaces(){const a=this.$refs.image,e=this.$refs.canvas;console.log(a);const t=await Promise.all(this.labels.map(async n=>{const l=`/img/${n}.jpg`,d=await L(l),m=await c(d).withFaceLandmarks().withFaceDescriptor();return new w(n,[m.descriptor])}));new v(t,.6);let s=await h(a,new F).withFaceLandmarks().withFaceDescriptors().withFaceExpressions();const r=_(e,a,!0),i=y(s,r);b(e,i),x(e,i),k(e,i,.05)},async submit(){const a={email:this.email,face_token:this.faceToken};console.log(a),a.status===200?console.log("Login successfull"):console.log("Login failed")}}};var E=function(){var e=this,t=e._self._c;return t("div",[t("h1",[e._v("Image Comparator from File")]),t("v-divider",{staticClass:"mb-3"}),e.imagePreview?t("div",{staticClass:"text-center d-flex justify-center align-center mb-2",staticStyle:{position:"relative"}},[t("img",{ref:"image",staticClass:"mx-auto",attrs:{src:e.imagePreview,alt:""}}),t("canvas",{ref:"canvas",staticStyle:{position:"absolute",left:"0",right:"0",margin:"auto"},attrs:{id:"mi-canvas"}})]):e._e(),t("form",{on:{submit:function(s){return s.preventDefault(),e.submit.apply(null,arguments)}}},[t("v-file-input",{attrs:{"prepend-icon":null,accept:"image/*","full-width":"",label:"select image",outlined:"","prepend-inner-icon":"mdi-paperclip",type:"file"},on:{change:e.upload},scopedSlots:e._u([{key:"selection",fn:function({text:s}){return[t("v-chip",{attrs:{color:"primary",label:"",small:""}},[e._v(" "+e._s(s)+" ")])]}}])}),t("v-text-field",{attrs:{label:"Email",outlined:"",placeholder:"Email",type:"text"},model:{value:e.email,callback:function(s){e.email=s},expression:"email"}}),t("v-text-field",{attrs:{label:"Password",outlined:"",placeholder:"Password",type:"password"},model:{value:e.password,callback:function(s){e.password=s},expression:"password"}}),t("v-btn",{staticClass:"mr-1 primary",attrs:{type:"submit"}},[e._v("Login")]),t("v-btn",{staticClass:"secondary",attrs:{type:"button"},on:{click:function(s){return e.detectFaces()}}},[e._v("Detectar")])],1)],1)},M=[],P=C(R,E,M,!1,null,"856ef0ae",null,null);const $=P.exports;export{$ as default};
