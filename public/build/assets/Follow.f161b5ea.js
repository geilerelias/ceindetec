import{P as u}from"./PageLayout.54cd38fa.js";import{S as h}from"./SpinnerComponent.6d0b39d4.js";import{L as v}from"./LoadingComponent.0c59c49a.js";import{n as p}from"./_plugin-vue2_normalizer.358ffe07.js";import"./PageLayout.vue_vue_type_style_index_0_scoped_c322193c_lang.749b729c.js";import"./app.77aa44cf.js";import"./logo-ceindetec.0997e866.js";import"./SettingsDropdown.da80baee.js";import"./Footer.69c5493d.js";/* empty css                                                         */const m={name:"Follow",components:{PageLayout:u,SpinnerComponent:h,loadingComponent:v},props:["data","errors"],data:()=>({tab:null,markers:[{id:"a",position:{lat:3,lng:101}},{id:"b",position:{lat:5,lng:99}},{id:"c",position:{lat:6,lng:97}}],lines:[{id:"1",path:[{lat:3,lng:101},{lat:5,lng:99}]},{id:"2",path:[{lat:5,lng:99},{lat:6,lng:97}]}],sede:"",dialog:!1,ruta:null,fav:!0,menu:!1,message:!1,hints:!0,items:[{text:"Dashboard",disabled:!1,href:"/dashboard"},{text:"Seguimientos",disabled:!0,href:"#"}],search:"",establishments:[],headquarters:[],information:[],works:[],isMunicipality:!1,isWorkType:!1,isEstablishments:!1,group:null,element:null,attrs:{class:"mb-6",elevation:2}}),created(){axios.get("/dashboard/establishment/all").then(s=>{this.establishments=s.data}).catch(s=>{console.log(s)}),axios.get("/dashboard/headquarters/all").then(s=>{this.headquarters=s.data}).catch(s=>{console.log(s)}),axios.get("/dashboard/work/all").then(s=>{this.works=s.data}).catch(s=>{console.log(s)}),this.applyChanges()},computed:{getData(){try{let s=this.search.toLowerCase(),e=new Array;for(const t in this.information){let i=this.information[t].filter(r=>{const a=r.municipality.toLowerCase(),c=this.getEstablishment(r.establishments_id).toLowerCase(),o=this.getHeadquarters(r.headquarters_id).toLowerCase(),n=r.work_type.toLowerCase();return this.isMunicipality&&!this.isWorkType&&!this.isEstablishments?a.indexOf(s)>-1:this.isMunicipality&&this.isWorkType&&!this.isEstablishments?a.indexOf(s)>-1||n.indexOf(s)>-1:this.isMunicipality&&!this.isWorkType&&this.isEstablishments?a.indexOf(s)>-1||c.indexOf(s)>-1:!this.isMunicipality&&this.isWorkType&&!this.isEstablishments||!this.isMunicipality&&this.isWorkType&&!this.isEstablishments?n.indexOf(s)>-1:!this.isMunicipality&&!this.isWorkType&&this.isEstablishments?c.indexOf(s)>-1:a.indexOf(s)>-1||c.indexOf(s)>-1||o.indexOf(s)>-1||n.indexOf(s)>-1});e[t]=i}return Object.assign({},e)}catch(s){return console.log("Error inesperado => ",s),this.information}}},methods:{async dailyRecords(s){try{let e=s.municipality,t=await this.getEstablishment(s.establishments_id),i=await this.getHeadquarters(s.headquarters_id);if(s.work_type==="Adecuaci\xF3n")try{let a={target:"_blank",rel:"noopener noreferrer"};window.open(route("work.adequacy",{municipality:e,establishments:t,headquarters:i}),"_blank")}catch(a){console.log(a)}else{let a={target:"_blank",rel:"noopener noreferrer"};window.open(route("work.building",{municipality:e,establishments:t,headquarters:i}),"_blank")}}catch(e){console.error(e)}},openDialog(s){this.element=s,this.sede=this.getHeadquarters(s.headquarters_id),this.ruta=s.coordinates,this.dialog=!0},getNumber(s){return parseInt(s)},getEstablishment(s){try{let e=null;if(typeof s!="number"){let t=this.getNumber(s);e=this.establishments.find(i=>i.id===t)}else e=this.establishments.find(t=>t.id===s);return e.name}catch{return null}},getHeadquarters(s){try{let e=null;if(typeof s!="number"){let t=this.getNumber(s);e=this.headquarters.find(i=>i.id===t)}else e=this.headquarters.find(t=>t.id===s);return e.name}catch{return null}},applyChanges(){const s={"Access-Control-Allow-Origin":"http://127.0.0.1:8000/","Access-Control-Allow-Credentials":"true"};axios.get(`/dashboard/work/group-by/${this.group}`,s).then(e=>{this.information=e.data}).catch(e=>{console.log(e)})},getDirectory(s){try{return encodeURIComponent(s.municipality+"/"+this.getEstablishment(s.establishments_id)+"/"+this.getHeadquarters(s.headquarters_id))}catch{}},getImgPrincipal(s){try{return`/get/img/${this.getDirectory(s)}/Img aula/`}catch{}}}};var g=function(){var e=this,t=e._self._c;return t("page-layout",{staticClass:"bg"},[t("inertia-head",[t("title",[e._v("Beneficiados")]),t("meta",{attrs:{content:"pagina principal del sistema de gesti\xF3n acad\xE9mica",name:"description"}})]),t("div",{staticClass:"bg"},[t("v-container",{staticClass:"mb-6"},[t("v-row",{staticClass:"ma-0"},[t("v-col",[t("v-card",{staticStyle:{width:"100%"}},[t("v-card-text",{},[t("v-row",{staticClass:"no-gutters"},[t("div",{staticClass:"d-flex justify-space-between justify-md-start col-md-6 col-12"},[t("inertia-link",{attrs:{href:"/before-during-after"}},[t("v-btn",{staticClass:"mr-3 secondary"},[e._v(" Cambios ")])],1),t("v-menu",{attrs:{"close-on-content-click":!1,"nudge-width":200,"offset-x":"",transition:"scale-transition"},scopedSlots:e._u([{key:"activator",fn:function({on:i,attrs:r}){return[t("v-btn",e._g(e._b({staticClass:"button-shadow primary--text",attrs:{outlined:""}},"v-btn",r,!1),i),[t("v-icon",{staticClass:"notranslate mr-2",attrs:{"aria-hidden":"true"}},[e._v(" mdi-filter-variant ")]),e._v(" Filtros ")],1)]}}]),model:{value:e.menu,callback:function(i){e.menu=i},expression:"menu"}},[t("v-card",[t("v-list",[t("v-list-item",[t("v-list-item-content",[t("v-list-item-title",[e._v("Filtro de b\xFAsqueda ")]),t("v-list-item-subtitle",[e._v("Desactiva o activa las opciones de b\xFAsquedas ")])],1),t("v-list-item-action",[t("v-btn",{attrs:{icon:""},on:{click:function(i){e.menu=!1}}},[t("v-icon",[e._v(" mdi-close ")])],1)],1)],1)],1),t("v-divider"),t("v-list",[t("v-list-item",[t("v-list-item-action",[t("v-switch",{on:{change:e.applyChanges},model:{value:e.isMunicipality,callback:function(i){e.isMunicipality=i},expression:"isMunicipality"}})],1),t("v-list-item-title",[e._v("Municipios")])],1),t("v-list-item",[t("v-list-item-action",[t("v-switch",{on:{change:e.applyChanges},model:{value:e.isWorkType,callback:function(i){e.isWorkType=i},expression:"isWorkType"}})],1),t("v-list-item-title",[e._v("Tipo de obra")])],1),t("v-list-item",[t("v-list-item-action",[t("v-switch",{on:{change:e.applyChanges},model:{value:e.isEstablishments,callback:function(i){e.isEstablishments=i},expression:"isEstablishments"}})],1),t("v-list-item-title",[e._v("Establecimiento")])],1)],1),t("v-divider"),t("v-list",[t("v-subheader",[e._v(" Agrupar por ")]),t("v-list-item",[t("v-radio-group",{attrs:{row:""},model:{value:e.group,callback:function(i){e.group=i},expression:"group"}},[t("v-radio",{attrs:{label:"Tipo de obra",value:"work_type"},on:{click:e.applyChanges}}),t("v-radio",{attrs:{label:"Establecimientos",value:"establishments_id"},on:{click:e.applyChanges}}),t("v-radio",{attrs:{label:"Municipio",value:"municipality"},on:{click:e.applyChanges}})],1)],1)],1)],1)],1)],1),t("v-spacer"),t("div",{staticClass:"mx-auto mt-4 mt-md-0",staticStyle:{"max-width":"250px"}},[t("v-text-field",{attrs:{clearable:"",dense:"",enclosed:"","hide-details":"",outlined:"",placeholder:"Buscar","prepend-inner-icon":"mdi-magnify"},model:{value:e.search,callback:function(i){e.search=i},expression:"search"}})],1)],1)],1)],1)],1)],1),t("v-row",{staticClass:"ma-0"},[t("v-col",[t("v-sheet",{staticClass:"pa-8",attrs:{"min-height":"70vh",rounded:"lg"}},[e._l(e.getData,function(i,r){return t("div",[t("v-list",{attrs:{"two-line":""}},[t("v-subheader",[e.group==null?t("div",[e._v(" Todos ")]):e.group==="establishments_id"?t("div",{staticClass:"text-uppercase font-weight-bold"},[e._v(" "+e._s(e.getEstablishment(r))+" ")]):t("div",{staticClass:"text-uppercase font-weight-bold"},[e._v(" "+e._s(r)+" ")]),t("v-spacer"),e._v(" cantidad: "+e._s(i.length)+" ")],1),t("v-divider"),t("v-row",{staticClass:"mt-2"},e._l(i,function(a,c){return t("v-col",{key:a.id,attrs:{cols:"12",lg:"4",md:"6"}},[t("a",{staticClass:"text-decoration-none",attrs:{href:`/benefited-detail/${e.getDirectory(a)}`,target:"_blank"}},[t("v-hover",{scopedSlots:e._u([{key:"default",fn:function({hover:o}){return[t("v-card",{staticClass:"pa-0 rounded-b-0"},[t("v-img",{class:o?"zoom":"",staticStyle:{transition:"all 0.5s"},attrs:{"aspect-ratio":16/9,src:e.getImgPrincipal(a),cover:""},scopedSlots:e._u([{key:"placeholder",fn:function(){return[t("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[t("loading-component")],1)]},proxy:!0}],null,!0)},[t("v-expand-transition",[o?t("div",{staticClass:"d-flex pa-2 transition-fast-in-fast-out primary darken-2 v-card--reveal text-h6 white--text",staticStyle:{height:"100%"}},[t("v-card",[t("v-list-item",[t("v-list-item-content",[t("v-list-item-title",{staticClass:"text-subtitle-1 mb-1"},[e._v(" "+e._s(e.getHeadquarters(a.headquarters_id))+" ")]),t("v-list-item-subtitle",[e._v(" "+e._s(e.getEstablishment(a.establishments_id))+" ")])],1)],1)],1)],1):e._e()])],1)],1)]}}],null,!0)})],1),t("v-card",{staticClass:"rounded-t-0"},[t("v-list-item",{scopedSlots:e._u([{key:"default",fn:function({active:o}){return[t("v-list-item-avatar",{attrs:{color:"grey lighten-2"}},[a.work_type==="Construcci\xF3n"?t("v-icon",{staticClass:"text--white",attrs:{color:"orange"},domProps:{textContent:e._s("mdi-account-hard-hat")}}):t("v-icon",{attrs:{color:"green"},domProps:{textContent:e._s("mdi-account-wrench")}})],1),t("v-list-item-content",[t("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function({on:n,attrs:l}){return[t("v-list-item-title",e._g(e._b({staticClass:"text-uppercase",domProps:{textContent:e._s(e.getHeadquarters(a.headquarters_id))}},"v-list-item-title",l,!1),n))]}}],null,!0)},[t("span",{staticClass:"white--text text-uppercase"},[e._v(" "+e._s(e.getHeadquarters(a.headquarters_id))+" ")])]),t("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:n,attrs:l}){return[t("v-list-item-subtitle",e._g(e._b({staticClass:"text--primary text-uppercase",domProps:{textContent:e._s(e.getEstablishment(a.establishments_id))}},"v-list-item-subtitle",l,!1),n))]}}],null,!0)},[t("span",{staticClass:"white--text text-uppercase"},[e._v(" "+e._s(e.getEstablishment(a.establishments_id))+" ")])]),t("v-list-item-subtitle",{staticClass:"text-uppercase",domProps:{textContent:e._s(a.municipality)}})],1),t("v-list-item-action",[t("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function({on:n,attrs:l}){return[t("v-btn",e._g(e._b({attrs:{icon:""},on:{click:function(d){return e.openDialog(a)}}},"v-btn",l,!1),n),[t("v-icon",{attrs:{color:"grey lighten-1"}},[e._v(" mdi-map-marker-path ")])],1)]}}],null,!0)},[t("span",[e._v("Ruta desde el centro de soporte")])]),t("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:n,attrs:l}){return[t("v-btn",e._g(e._b({attrs:{icon:""},on:{click:function(d){return e.dailyRecords(a)}}},"v-btn",l,!1),n),[t("v-icon",{staticClass:"mr-1",attrs:{color:"grey lighten-1"}},[e._v(" mdi-chart-timeline ")])],1)]}}],null,!0)},[t("span",[e._v("Seguimiento de actividades")])])],1)]}}],null,!0)})],1)],1)}),1)],1)],1)}),Object.keys(e.information).length<=0?t("div",[t("v-row",{staticClass:"mt-2"},e._l(10,function(i){return t("v-col",{key:i.id,attrs:{cols:"12",lg:"4",md:"6"}},[t("v-skeleton-loader",e._b({attrs:{type:"image,list-item-avatar-three-line"}},"v-skeleton-loader",e.attrs,!1))],1)}),1)],1):e._e()],2)],1)],1)],1),t("v-row",{attrs:{justify:"center"}},[t("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:e.dialog,callback:function(i){e.dialog=i},expression:"dialog"}},[t("v-card",[t("v-toolbar",{attrs:{color:"primary",dark:""}},[t("v-btn",{attrs:{dark:"",icon:""},on:{click:function(i){e.dialog=!1}}},[t("v-icon",[e._v("mdi-close")])],1),t("v-toolbar-title",[e._v(" "+e._s(e.sede))]),t("v-spacer"),t("v-toolbar-items",[t("v-btn",{attrs:{dark:"",text:""},on:{click:function(i){e.dialog=!1}}},[e._v(" cerrar ")])],1)],1),t("v-container",{staticStyle:{height:"100vh"}},[t("v-sheet",{staticClass:"gray",attrs:{"min-height":"70vh",rounded:"lg"}},[t("div",{staticClass:"iframe-container mx-auto rounded-lg",attrs:{elevation:"12"}},[t("iframe",{staticClass:"rounded-lg",staticStyle:{border:"0px",display:"block"},attrs:{src:e.ruta,allowfullscreen:"",loading:"lazy"}})])])],1)],1)],1)],1)],1)],1)},f=[],b=p(m,g,f,!1,null,null,null,null);const T=b.exports;export{T as default};
