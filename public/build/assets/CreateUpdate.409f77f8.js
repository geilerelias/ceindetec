import{V as i}from"./vue2-editor.esm.b661da6c.js";import{S as o}from"./SpinnerComponent.6d0b39d4.js";import{n}from"./_plugin-vue2_normalizer.358ffe07.js";import"./app.7acbb6e1.js";const l={name:"CreateUpdate",components:{VueEditor:i,SpinnerComponent:o},props:{data:Object,edit:Boolean,open:{type:Boolean,default:!1},close:Function,errors:Object},data:()=>({valid:!1,rules:{required:r=>!!r||"Campo requerido.",max:r=>r.length<=20||"M\xE1ximo 20 caracteres",min:r=>r.length>=10||"M\xEDnimo 10 caracteres",email:r=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(r)||"Invalid e-mail.",phone:r=>/^\(?(\d{3})\)?[- ]?(\d{3})[- ]?(\d{4})$/.test(r)||"Numero telef\xF3nico invalido.",text:r=>/^\s+$/.test(r)||"Solo caracteres alfab\xE9ticos.",number:r=>/^\d+$/.test(r)||"solo caracteres num\xE9ricos."},form:{name:null,description:null},defaultForm:{name:null,description:null},customToolbar:[[{font:[]}],[{header:[!1,1,2,3,4,5,6]}],[{size:["small",!1,"large","huge"]}],["bold","italic","underline","strike"],[{align:""},{align:"center"},{align:"right"},{align:"justify"}],[{header:1},{header:2}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["link","formula"],[{direction:"rtl"}],["clean"]],management:[{title:"Editar",icon:"mdi-playlist-edit",route:"area.index"},{title:"Eliminar",icon:"mdi-playlist-remove",route:"area.index"},{title:"Crear",icon:"mdi-playlist-plus",route:"area.index"},{title:"Salir",icon:"mdi-close",route:"area.index"}]}),computed:{isEdit(){return this.edit===!0&&(this.form=this.data),this.edit}},methods:{validate(){this.$refs.form.validate()},closeModal(){this.reset(),this.close()},reset:function(){this.form=this.defaultForm,this.resetValidation()},resetValidation(){this.$refs.form.resetValidation()},save:function(r){this.saving=!0,!this.validate()&&!this.valid?(this.$swal.fire("Campos Obligatorio!","Ingresa los campos obligatorios!","error"),this.saving=!1):this.$inertia.post(this.route("area.store"),r,{onSuccess:t=>{t.data,console.log(t),console.log("errors => ",this.$page.errors),this.$swal({icon:`${this.$page.errors.name?"error":"success"}`,title:`${this.$page.errors.name?"Ups...":"\xA1Buen trabajo!"}`,text:`${this.$page.errors.name?this.$page.errors.name[0]:this.$page.flash.message}`}).then(e=>{this.saving=!1,e.isConfirmed&&(this.headquarters=this.defaultHeadquarters,this.reset(),this.resetValidation(),this.$inertia.get(this.route("area.index")))})},onError:t=>{this.saving=!1;const e=t.response.data.errors;let s="";for(var a in e)s+=a+": "+e[a]+`
 `;this.$swal.fire("Error!",s,"error"),console.log(s)},onFinish:t=>{this.saving=!1}})},update:function(r){r._method="PUT",this.$inertia.post(this.route("area.update",r.id),r,{onSuccess:t=>{console.log(t.props.errors),this.$swal({icon:`${t.props.errors?"error":"success"}`,title:`${t.props.errors?"Ups...":"\xA1Buen trabajo!"}`,text:`${t.props.errors?t.props.errors:t.props.flash.message}`}),this.reset(),this.closeModal()},onError:t=>{this.reset(),this.closeModal()},onFinish:t=>{this.reset(),this.closeModal(),this.editMode=!1}})}}};var c=function(){var t=this,e=t._self._c;return e("v-dialog",{staticStyle:{"z-index":"9"},attrs:{value:t.open,"max-width":"800",fullscreen:"","hide-overlay":"",persistent:"",transition:"dialog-bottom-transition",scrollable:""}},[e("v-card",{staticClass:"min-h-screen",attrs:{tile:"",color:"grey lighten-4"}},[e("v-toolbar",{staticStyle:{"max-height":"150px"},attrs:{flat:"",dark:"",color:"primary"}},[e("v-btn",{attrs:{icon:"",dark:""},on:{click:function(s){return t.closeModal()}}},[e("v-icon",[t._v("mdi-close")])],1),e("v-toolbar-title",{staticClass:"text-h5 white--text"},[t._v("Gesti\xF3n de areas curriculares")]),e("v-spacer"),e("v-menu",{attrs:{bottom:"",right:"","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e("v-btn",t._g(t._b({attrs:{dark:"",icon:""}},"v-btn",a,!1),s),[e("v-icon",[t._v("mdi-dots-vertical")])],1)]}}])},[e("v-list",{attrs:{dense:""}},t._l(t.management,function(s,a){return e("inertia-link",{key:a,attrs:{href:t.route(s.route)}},[e("v-list-item",{attrs:{link:""}},[e("v-list-item-icon",[e("v-icon",[t._v(t._s(s.icon))])],1),e("v-list-item-title",[t._v(t._s(s.title))])],1)],1)}),1)],1)],1),e("v-container",[e("v-form",{ref:"form",model:{value:t.valid,callback:function(s){t.valid=s},expression:"valid"}},[e("v-card",{staticClass:"mt-12"},[e("v-card-title",{staticClass:"align-start"},[e("v-card",{staticClass:"overflow-hidden mt-n9 transition-swing elevation-6 rounded primary fixed",staticStyle:{"max-width":"100%"}},[e("div",{staticClass:"pa-8"},[e("v-icon",{attrs:{dark:"",size:"36"}},[t._v("mdi-book-multiple")])],1)]),e("div",{staticClass:"text-h5 pl-4"},[t._v(" "+t._s(t.isEdit!==!1?"Editar area":"Crear nueva area")+" ")])],1),e("v-card-text",[e("v-row",[e("v-col",{staticClass:"col-12"},[e("v-text-field",{attrs:{outlined:"",counter:50,label:"Nombre",rules:[t.rules.required]},model:{value:t.form.name,callback:function(s){t.$set(t.form,"name",s)},expression:"form.name"}}),t.$page.errors.title?e("div",{staticClass:"text-red-500"},[t._v(" "+t._s(t.$page.errors.title[0])+" ")]):t._e()],1),e("v-col",{staticClass:"col-12"},[e("v-label",{staticClass:"mb-4",attrs:{for:"myTextEditor"}},[t._v("Descripci\xF3n")]),e("div",{staticClass:"py-2"},[e("vue-editor",{ref:"myTextEditor",attrs:{"editor-toolbar":t.customToolbar,rules:[t.rules.required]},model:{value:t.form.description,callback:function(s){t.$set(t.form,"description",s)},expression:"form.description"}})],1),t.$page.errors.starts_at?e("div",{staticClass:"text-red-500"},[t._v(" "+t._s(t.$page.errors.starts_at[0])+" ")]):t._e()],1)],1),e("div",{staticClass:"d-flex justify-end"},[e("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.edit,expression:"!edit"}],staticClass:"primary mx-1",attrs:{"wire:click.prevent":"store()",type:"button",dark:""},on:{click:function(s){return t.save(t.form)}}},[t._v(" Guardar ")]),e("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.edit,expression:"edit"}],staticClass:"primary x-1",attrs:{"wire:click.prevent":"store()",type:"button",dark:""},on:{click:function(s){return t.update(t.form)}}},[t._v(" Actualizar ")]),e("v-btn",{staticClass:"secondary mx-1",attrs:{type:"button",dark:""},on:{click:function(s){return t.closeModal()}}},[t._v(" Cancelar ")])],1)],1)],1)],1)],1)],1)],1)},d=[],u=n(l,c,d,!1,null,"3fbf9baa",null,null);const h=u.exports;export{h as default};
