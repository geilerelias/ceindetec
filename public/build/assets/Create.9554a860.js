import{A as l}from"./AppLayout.06bc91b5.js";import{B as o}from"./BreadCrumbs.14245490.js";import{c as r}from"./colombia.89799eca.js";import{P as m}from"./PictureInput.1e25d6a4.js";import{S as c}from"./SpinnerComponent.6d0b39d4.js";import{n as d}from"./_plugin-vue2_normalizer.358ffe07.js";import"./Footer.30133124.js";import"./app.386f4fb4.js";import"./logo-ceindetec.0997e866.js";import"./Logo.5a18e3f9.js";import"./SettingsDropdown.da80baee.js";const p={name:"Create",components:{AppLayout:l,BreadCrumbs:o,PictureInput:m,SpinnerComponent:c},props:["data","errors"],data:()=>({items:[{text:"Dashboard",disabled:!1,href:"/dashboard"},{text:"Establecimientos",disabled:!1,href:"/dashboard/establishment"},{text:"Crear",disabled:!0,href:"#"}],saving:!1,valid:!1,name:"",imageUrl:"",imageFile:null,imageName:"",departments:[],establishment:{name:"",nit:"",municipality:null,department:null},defaultEstablishment:{name:"",nit:"",municipality:null,department:null},rules:{required:s=>!!s||"Campo requerido.",max:s=>s.length<=12||"M\xE1ximo 12 caracteres",min:s=>s.length>=12||"M\xEDnimo 12 caracteres",email:s=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(s)||"Invalid e-mail.",phone:s=>/^\(?(\d{3})\)?[- ]?(\d{3})[- ]?(\d{4})$/.test(s)||"Numero telef\xF3nico invalido.",text:s=>/^\s+$/.test(s)||"Solo caracteres alfab\xE9ticos.",number:s=>/^\d+$/.test(s)||"solo caracteres num\xE9ricos."}}),created(){for(const s in r)this.departments.push(r[s].departamento);this.departments=this.departments.sort()},methods:{validate(){this.$refs.form.validate()},reset(){this.$refs.form.reset()},resetValidation(){this.$refs.form.resetValidation()},saved(){if(this.saving=!0,!this.validate()&&!this.valid)this.$swal.fire("Campos Obligatorio!","Ingresa los campos obligatorios!","error"),this.saving=!1;else{let t=new FormData;for(var s in this.establishment)t.append(s,this.establishment[s]);this.$inertia.post("/dashboard/establishment",t,{onSuccess:e=>{let a=e.data;console.log(a),this.$swal({icon:`${this.$page.errors.name?"error":"success"}`,title:`${this.$page.errors.name?"Ups...":"\xA1Buen trabajo!"}`,text:`${this.$page.errors.name?this.$page.errors.name[0]:this.$page.flash.message}`}).then(i=>{this.saving=!1,i.isConfirmed&&(this.establishment=this.defaultEstablishment,this.reset(),this.resetValidation(),this.$inertia.get(this.route("establishment.index")))})},onError:e=>{console.log(e),this.saving=!1;const a=e.response.data.errors;let i="";for(var n in a)i+=n+": "+a[n]+`
 `;this.$swal.fire("Error!",i,"error"),console.log(i)},onFinish:e=>{}})}},getCities(s){try{return r.filter(function(t){return t.departamento==s})[0].ciudades}catch{return[]}}}};var u=function(){var t=this,e=t._self._c;return e("app-layout",[e("bread-crumbs",{attrs:{name:"Registro de establecimiento",items:t.items}}),e("v-container",{staticClass:"d-flex justify-center"},[e("div",{staticClass:"py-6",staticStyle:{"max-width":"800px"}},[e("v-card",{staticClass:"mt-4"},[e("v-card-title",{staticClass:"align-start"},[e("v-card",{staticClass:"overflow-hidden mt-n9 transition-swing elevation-6 rounded primary",staticStyle:{"max-width":"100%"}},[e("div",{staticClass:"pa-8"},[e("v-icon",{attrs:{dark:"",size:"36"}},[t._v("mdi-school")])],1)]),e("div",{staticClass:"text-h5 pl-4"},[t._v(" Ingresa la informaci\xF3n del establecimiento ")])],1),e("v-form",{ref:"form",model:{value:t.valid,callback:function(a){t.valid=a},expression:"valid"}},[e("v-container",{staticClass:"py-0 px-4"},[e("v-row",{staticClass:"row"},[e("v-col",{staticClass:"col-12"},[e("v-text-field",{attrs:{label:"Nombre del establecimiento",rules:[t.rules.required,t.rules.min]},model:{value:t.establishment.name,callback:function(a){t.$set(t.establishment,"name",a)},expression:"establishment.name"}})],1),e("v-col",{staticClass:"col-md-4 col-12"},[e("v-text-field",{attrs:{label:"Nit",type:"number"},model:{value:t.establishment.nit,callback:function(a){t.$set(t.establishment,"nit",a)},expression:"establishment.nit"}})],1),e("v-col",{staticClass:"col-md-3 col-12"},[e("v-select",{attrs:{items:t.departments,rules:[t.rules.required],label:"Departamento *",required:""},model:{value:t.establishment.department,callback:function(a){t.$set(t.establishment,"department",a)},expression:"establishment.department"}})],1),e("v-col",{staticClass:"col-md-3 col-12"},[e("v-select",{attrs:{disabled:t.establishment.department==null,items:t.getCities(t.establishment.department),rules:[t.rules.required],label:"Municipio *",required:""},model:{value:t.establishment.municipality,callback:function(a){t.$set(t.establishment,"municipality",a)},expression:"establishment.municipality"}})],1),e("v-col",{staticClass:"text-right col-12 pb-6"},[e("v-btn",{attrs:{color:"secondary"},on:{click:function(a){return t.reset()}}},[t._v(" limpiar formulario ")]),e("v-btn",{attrs:{color:"primary",disabled:!t.valid,loading:t.saving},on:{click:t.saved}},[t._v(" Registrar Informaci\xF3n ")])],1)],1)],1)],1)],1)],1)]),e("spinner-component",{attrs:{value:t.saving,color:"primary",opacity:.9}})],1)},h=[],v=d(p,u,h,!1,null,null,null,null);const S=v.exports;export{S as default};
