import{P as u}from"./PageLayout.655606f3.js";import{S as h}from"./SpinnerComponent.6d0b39d4.js";import{L as v}from"./LoadingComponent.0c59c49a.js";import{n as p}from"./_plugin-vue2_normalizer.358ffe07.js";import"./PageLayout.vue_vue_type_style_index_0_scoped_c322193c_lang.ec646453.js";import"./app.8bbe0a1c.js";import"./logo-ceindetec.0997e866.js";import"./SettingsDropdown.da80baee.js";import"./Footer.c2e27410.js";/* empty css                                                         */const m={name:"Follow",components:{PageLayout:u,SpinnerComponent:h,loadingComponent:v},props:["data","errors"],data:()=>({tab:null,markers:[{id:"a",position:{lat:3,lng:101}},{id:"b",position:{lat:5,lng:99}},{id:"c",position:{lat:6,lng:97}}],lines:[{id:"1",path:[{lat:3,lng:101},{lat:5,lng:99}]},{id:"2",path:[{lat:5,lng:99},{lat:6,lng:97}]}],sede:"",dialog:!1,ruta:null,fav:!0,menu:!1,message:!1,hints:!0,items:[{text:"Dashboard",disabled:!1,href:"/dashboard"},{text:"Seguimientos",disabled:!0,href:"#"}],search:"",establishments:[],headquarters:[],information:[],works:[],isMunicipality:!1,isWorkType:!1,isEstablishments:!1,group:null,element:null,attrs:{class:"mb-6",elevation:2}}),created(){axios.get("/dashboard/establishment/all").then(s=>{this.establishments=s.data}).catch(s=>{console.log(s)}),axios.get("/dashboard/headquarters/all").then(s=>{this.headquarters=s.data}).catch(s=>{console.log(s)}),axios.get("/dashboard/work/all").then(s=>{this.works=s.data}).catch(s=>{console.log(s)}),this.applyChanges()},computed:{getData(){try{let s=this.search.toLowerCase();console.log("this is information => ",this.information," type => ",typeof this.information);let t=new Array;for(const e in this.information){let i=this.information[e].filter(o=>{console.log("this item =>",o);const a=o.municipality.toLowerCase();console.log("municipio"),console.log("establecimiento");const c=this.getEstablishment(o.establishments_id).toLowerCase();console.log("sede");const r=this.getHeadquarters(o.headquarters_id).toLowerCase();console.log("tipo");const n=o.work_type.toLowerCase();return this.isMunicipality&&!this.isWorkType&&!this.isEstablishments?a.indexOf(s)>-1:this.isMunicipality&&this.isWorkType&&!this.isEstablishments?a.indexOf(s)>-1||n.indexOf(s)>-1:this.isMunicipality&&!this.isWorkType&&this.isEstablishments?a.indexOf(s)>-1||c.indexOf(s)>-1:!this.isMunicipality&&this.isWorkType&&!this.isEstablishments||!this.isMunicipality&&this.isWorkType&&!this.isEstablishments?n.indexOf(s)>-1:!this.isMunicipality&&!this.isWorkType&&this.isEstablishments?c.indexOf(s)>-1:a.indexOf(s)>-1||c.indexOf(s)>-1||r.indexOf(s)>-1||n.indexOf(s)>-1});t[e]=i}return console.log("this is data => ",t),Object.assign({},t)}catch(s){return console.log("Error inesperado => ",s),this.information}}},methods:{async dailyRecords(s){try{console.log("daily Records",s);let t=s.municipality,e=await this.getEstablishment(s.establishments_id),i=await this.getHeadquarters(s.headquarters_id);if(s.work_type==="Adecuaci\xF3n"){let a={target:"_blank"};this.$inertia.get(route("work.adequacy",{municipality:t,establishments:e,headquarters:i}),null,a)}else window.open(route("work.building",{municipality:t,establishments:e,headquarters:i}),"_blank")}catch(t){console.error(t)}},openDialog(s){console.log(s),this.element=s,this.sede=this.getHeadquarters(s.headquarters_id),this.ruta=s.coordinates,this.dialog=!0},getNumber(s){return parseInt(s)},getEstablishment(s){try{let t=null;if(typeof s!="number"){let e=this.getNumber(s);t=this.establishments.find(i=>i.id===e)}else t=this.establishments.find(e=>e.id===s);return t.name}catch{return null}},getHeadquarters(s){try{let t=null;if(typeof s!="number"){let e=this.getNumber(s);t=this.headquarters.find(i=>i.id===e)}else t=this.headquarters.find(e=>e.id===s);return t.name}catch{return null}},applyChanges(){console.log("se ejecuta apply changes");const s={"Access-Control-Allow-Origin":"http://127.0.0.1:8000/","Access-Control-Allow-Credentials":"true"};axios.get(`/dashboard/work/group-by/${this.group}`,s).then(t=>{console.log(t.data),this.information=t.data}).catch(t=>{console.log(t)})},getDirectory(s){return encodeURIComponent(s.municipality+"/"+this.getEstablishment(s.establishments_id)+"/"+this.getHeadquarters(s.headquarters_id))}}};var g=function(){var t=this,e=t._self._c;return e("page-layout",{staticClass:"bg"},[e("div",{staticClass:"bg"},[e("v-container",{staticClass:"mb-6"},[e("v-row",{staticClass:"ma-0"},[e("v-col",[e("v-card",{staticStyle:{width:"100%"}},[e("v-card-text",{},[e("v-row",{staticClass:"no-gutters"},[e("div",{staticClass:"d-flex justify-space-between justify-md-start col-md-6 col-12"},[e("inertia-link",{attrs:{href:"/before-during-after"}},[e("v-btn",{staticClass:"mr-3 secondary"},[t._v(" Cambios ")])],1),e("v-menu",{attrs:{"close-on-content-click":!1,"nudge-width":200,"offset-x":"",transition:"scale-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:o}){return[e("v-btn",t._g(t._b({staticClass:"button-shadow primary--text",attrs:{outlined:""}},"v-btn",o,!1),i),[e("v-icon",{staticClass:"notranslate mr-2",attrs:{"aria-hidden":"true"}},[t._v(" mdi-filter-variant ")]),t._v(" Filtros ")],1)]}}]),model:{value:t.menu,callback:function(i){t.menu=i},expression:"menu"}},[e("v-card",[e("v-list",[e("v-list-item",[e("v-list-item-content",[e("v-list-item-title",[t._v("Filtro de b\xFAsqueda ")]),e("v-list-item-subtitle",[t._v("Desactiva o activa las opciones de b\xFAsquedas ")])],1),e("v-list-item-action",[e("v-btn",{attrs:{icon:""},on:{click:function(i){t.menu=!1}}},[e("v-icon",[t._v(" mdi-close ")])],1)],1)],1)],1),e("v-divider"),e("v-list",[e("v-list-item",[e("v-list-item-action",[e("v-switch",{on:{change:t.applyChanges},model:{value:t.isMunicipality,callback:function(i){t.isMunicipality=i},expression:"isMunicipality"}})],1),e("v-list-item-title",[t._v("Municipios")])],1),e("v-list-item",[e("v-list-item-action",[e("v-switch",{on:{change:t.applyChanges},model:{value:t.isWorkType,callback:function(i){t.isWorkType=i},expression:"isWorkType"}})],1),e("v-list-item-title",[t._v("Tipo de obra")])],1),e("v-list-item",[e("v-list-item-action",[e("v-switch",{on:{change:t.applyChanges},model:{value:t.isEstablishments,callback:function(i){t.isEstablishments=i},expression:"isEstablishments"}})],1),e("v-list-item-title",[t._v("Establecimiento")])],1)],1),e("v-divider"),e("v-list",[e("v-subheader",[t._v(" Agrupar por ")]),e("v-list-item",[e("v-radio-group",{attrs:{row:""},model:{value:t.group,callback:function(i){t.group=i},expression:"group"}},[e("v-radio",{attrs:{label:"Tipo de obra",value:"work_type"},on:{click:t.applyChanges}}),e("v-radio",{attrs:{label:"Establecimientos",value:"establishments_id"},on:{click:t.applyChanges}}),e("v-radio",{attrs:{label:"Municipio",value:"municipality"},on:{click:t.applyChanges}})],1)],1)],1)],1)],1)],1),e("v-spacer"),e("div",{staticClass:"mx-auto mt-4 mt-md-0",staticStyle:{"max-width":"250px"}},[e("v-text-field",{attrs:{"hide-details":"",dense:"",enclosed:"",outlined:"","prepend-inner-icon":"mdi-magnify",placeholder:"Buscar",clearable:""},model:{value:t.search,callback:function(i){t.search=i},expression:"search"}})],1)],1)],1)],1)],1)],1),e("v-row",{staticClass:"ma-0"},[e("v-col",[e("v-sheet",{staticClass:"pa-8",attrs:{"min-height":"70vh",rounded:"lg"}},[t._l(t.getData,function(i,o){return e("div",[e("v-list",{attrs:{"two-line":""}},[e("v-subheader",[t.group==null?e("div",[t._v(" Todos ")]):t.group=="establishments_id"?e("div",{staticClass:"text-uppercase font-weight-bold"},[t._v(" "+t._s(t.getEstablishment(o))+" ")]):e("div",{staticClass:"text-uppercase font-weight-bold"},[t._v(" "+t._s(o)+" ")]),e("v-spacer"),t._v(" cantidad: "+t._s(i.length)+" ")],1),e("v-divider"),e("v-row",{staticClass:"mt-2"},t._l(i,function(a,c){return e("v-col",{key:a.id,attrs:{cols:"12",md:"6",lg:"4"}},[e("inertia-link",{staticClass:"text-decoration-none",attrs:{href:`/benefited-detail/${t.getDirectory(a)}`}},[e("v-hover",{scopedSlots:t._u([{key:"default",fn:function({hover:r}){return[e("v-card",{staticClass:"pa-0 rounded-b-0",on:{click:function(n){t.getFolder(a.municipality,t.getEstablishment(a.establishment_id),a.name)}}},[e("v-img",{class:r?"zoom":"",staticStyle:{transition:"all 0.5s"},attrs:{cover:"","aspect-ratio":16/9,src:`/get/img/${t.getDirectory(a)}/Img aula/`},scopedSlots:t._u([{key:"placeholder",fn:function(){return[e("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[e("loading-component")],1)]},proxy:!0}],null,!0)},[e("v-expand-transition",[r?e("div",{staticClass:"d-flex pa-2 transition-fast-in-fast-out primary darken-2 v-card--reveal text-h6 white--text",staticStyle:{height:"100%"}},[e("v-card",[e("v-list-item",[e("v-list-item-content",[e("v-list-item-title",{staticClass:"text-subtitle-1 mb-1"},[t._v(" "+t._s(t.getHeadquarters(a.headquarters_id))+" ")]),e("v-list-item-subtitle",[t._v(" "+t._s(t.getEstablishment(a.establishments_id))+" ")])],1)],1)],1)],1):t._e()])],1)],1)]}}],null,!0)})],1),e("v-card",{staticClass:"rounded-t-0"},[e("v-list-item",{scopedSlots:t._u([{key:"default",fn:function({active:r}){return[e("v-list-item-avatar",{attrs:{color:"grey lighten-2"}},[a.work_type=="Construcci\xF3n"?e("v-icon",{staticClass:"text--white",attrs:{color:"orange"},domProps:{textContent:t._s("mdi-account-hard-hat")}}):e("v-icon",{attrs:{color:"green"},domProps:{textContent:t._s("mdi-account-wrench")}})],1),e("v-list-item-content",[e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:n,attrs:l}){return[e("v-list-item-title",t._g(t._b({staticClass:"text-uppercase",domProps:{textContent:t._s(t.getHeadquarters(a.headquarters_id))}},"v-list-item-title",l,!1),n))]}}],null,!0)},[e("span",{staticClass:"white--text text-uppercase"},[t._v(" "+t._s(t.getHeadquarters(a.headquarters_id))+" ")])]),e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:n,attrs:l}){return[e("v-list-item-subtitle",t._g(t._b({staticClass:"text--primary text-uppercase",domProps:{textContent:t._s(t.getEstablishment(a.establishments_id))}},"v-list-item-subtitle",l,!1),n))]}}],null,!0)},[e("span",{staticClass:"white--text text-uppercase"},[t._v(" "+t._s(t.getEstablishment(a.establishments_id))+" ")])]),e("v-list-item-subtitle",{staticClass:"text-uppercase",domProps:{textContent:t._s(a.municipality)}})],1),e("v-list-item-action",[e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:n,attrs:l}){return[e("v-btn",t._g(t._b({attrs:{icon:""},on:{click:function(d){return t.openDialog(a)}}},"v-btn",l,!1),n),[e("v-icon",{attrs:{color:"grey lighten-1"}},[t._v(" mdi-map-marker-path ")])],1)]}}],null,!0)},[e("span",[t._v("Ruta desde el centro de soporte")])]),e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:n,attrs:l}){return[e("v-btn",t._g(t._b({attrs:{icon:""},on:{click:function(d){return t.dailyRecords(a)}}},"v-btn",l,!1),n),[e("v-icon",{staticClass:"mr-1",attrs:{color:"grey lighten-1"}},[t._v(" mdi-chart-timeline ")])],1)]}}],null,!0)},[e("span",[t._v("Seguimiento de actividades")])])],1)]}}],null,!0)})],1)],1)}),1)],1)],1)}),Object.keys(t.information).length<=0?e("div",[e("v-row",{staticClass:"mt-2"},t._l(10,function(i){return e("v-col",{key:i.id,attrs:{cols:"12",md:"6",lg:"4"}},[e("v-skeleton-loader",t._b({attrs:{type:"image,list-item-avatar-three-line"}},"v-skeleton-loader",t.attrs,!1))],1)}),1)],1):t._e()],2)],1)],1)],1),e("v-row",{attrs:{justify:"center"}},[e("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:t.dialog,callback:function(i){t.dialog=i},expression:"dialog"}},[e("v-card",[e("v-toolbar",{attrs:{dark:"",color:"primary"}},[e("v-btn",{attrs:{icon:"",dark:""},on:{click:function(i){t.dialog=!1}}},[e("v-icon",[t._v("mdi-close")])],1),e("v-toolbar-title",[t._v(" "+t._s(t.sede))]),e("v-spacer"),e("v-toolbar-items",[e("v-btn",{attrs:{dark:"",text:""},on:{click:function(i){t.dialog=!1}}},[t._v(" cerrar ")])],1)],1),e("v-container",{staticStyle:{height:"100vh"}},[e("v-sheet",{staticClass:"gray",attrs:{"min-height":"70vh",rounded:"lg"}},[e("div",{staticClass:"iframe-container mx-auto rounded-lg",attrs:{elevation:"12"}},[e("iframe",{staticClass:"rounded-lg",staticStyle:{border:"0px",display:"block"},attrs:{src:t.ruta,allowfullscreen:"",loading:"lazy"}})])])],1)],1)],1)],1)],1)])},f=[],b=p(m,g,f,!1,null,null,null,null);const T=b.exports;export{T as default};
